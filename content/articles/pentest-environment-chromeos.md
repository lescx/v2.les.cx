+++
draft = true
title = 'Setup a pentest environment on ChromeOS'
date = 2024-01-04T20:46:00+02:00
lastmod = 2024-01-04T20:46:00+02:00
+++

```shell
(termina) chronos@localhost ~ $ lxc image copy images:kali/current/amd64 local: --alias kali-image                                            
Image copied successfully!                     
(termina) chronos@localhost ~ $ lxc image list
+------------+--------------+--------+----------------------------------------+--------------+-----------+----------+------------------------------+
|   ALIAS    | FINGERPRINT  | PUBLIC |              DESCRIPTION               | ARCHITECTURE |   TYPE    |   SIZE   |         UPLOAD DATE          |
+------------+--------------+--------+----------------------------------------+--------------+-----------+----------+------------------------------+
| kali-image | b781e2513ece | no     | Kali current amd64 (20240104_17:14)    | x86_64       | CONTAINER | 92.16MB  | Jan 5, 2024 at 11:32am (UTC) |
+------------+--------------+--------+----------------------------------------+--------------+-----------+----------+------------------------------+
|            | 15a0c8fba535 | no     | Debian bookworm amd64 (20231205_05:56) | x86_64       | CONTAINER | 303.68MB | Jan 5, 2024 at 11:05am (UTC) |
+------------+--------------+--------+----------------------------------------+--------------+-----------+----------+------------------------------+
(termina) chronos@localhost ~ $ lxc launch kali-image kali           
Creating kali
Starting kali                             
(termina) chronos@localhost ~ $ lxc start kali
Error: The instance is already running
(termina) chronos@localhost ~ $ lxc exec kali -- bash 
root@kali:~# 
```

```
(termina) chronos@localhost ~ $ lxc config set core.https_address :8443
(termina) chronos@localhost ~ $ lxc config set core.trust_password "supersecurepassword"

luca@penguin:~$ lxc image list && lxc list
+----------------------+--------------+--------+----------------------------------------+--------------+-----------+----------+------------------------------+
|        ALIAS         | FINGERPRINT  | PUBLIC |              DESCRIPTION               | ARCHITECTURE |   TYPE    |   SIZE   |         UPLOAD DATE          |
+----------------------+--------------+--------+----------------------------------------+--------------+-----------+----------+------------------------------+
| alpine-edge-image    | 05e7596def3d | no     | Alpine edge amd64 (20240104_13:00)     | x86_64       | CONTAINER | 2.93MB   | Jan 5, 2024 at 1:17pm (UTC)  |
+----------------------+--------------+--------+----------------------------------------+--------------+-----------+----------+------------------------------+
| busybox-1-36-1-image | a0b8d910593c | no     | Busybox 1.36.1 amd64 (20240105_06:00)  | x86_64       | CONTAINER | 1.07MB   | Jan 5, 2024 at 1:21pm (UTC)  |
+----------------------+--------------+--------+----------------------------------------+--------------+-----------+----------+------------------------------+
| kali-image           | b781e2513ece | no     | Kali current amd64 (20240104_17:14)    | x86_64       | CONTAINER | 92.16MB  | Jan 5, 2024 at 11:32am (UTC) |
+----------------------+--------------+--------+----------------------------------------+--------------+-----------+----------+------------------------------+
|                      | 15a0c8fba535 | no     | Debian bookworm amd64 (20231205_05:56) | x86_64       | CONTAINER | 303.68MB | Jan 5, 2024 at 11:05am (UTC) |
+----------------------+--------------+--------+----------------------------------------+--------------+-----------+----------+------------------------------+
+-------------+---------+-----------------------+------+-----------+-----------+
|    NAME     |  STATE  |         IPV4          | IPV6 |   TYPE    | SNAPSHOTS |
+-------------+---------+-----------------------+------+-----------+-----------+
| alpine-edge | RUNNING | 100.115.92.202 (eth0) |      | CONTAINER | 0         |
+-------------+---------+-----------------------+------+-----------+-----------+
| kali        | RUNNING | 100.115.92.206 (eth0) |      | CONTAINER | 0         |
+-------------+---------+-----------------------+------+-----------+-----------+
| penguin     | RUNNING | 100.115.92.195 (eth0) |      | CONTAINER | 0         |
+-------------+---------+-----------------------+------+-----------+-----------+
luca@penguin:~$ 
```

```shell
luca@penguin:~$ lxc remote add chronos $(ip route show | awk '{print $3}' | head -n 1)
If this is your first time running LXD on this machine, you should also run: lxd init
To start your first container, try: lxc launch ubuntu:22.04
Or for a virtual machine: lxc launch ubuntu:22.04 --vm

Generating a client certificate. This may take a minute...
Certificate fingerprint: f26296f0961329f1e8a00b6cff1966a55eebfce2759c33ca58d01421cc3091c4
ok (y/n/[fingerprint])? y
Admin password (or token) for chronos: <enter password here>
Client certificate now trusted by server: chronos
luca@penguin:~$ lxc remote set-default chronos
luca@penguin:~$ sudo usermod -aG lxd luca
# Beginning here, you can run lxc regularily!
luca@penguin:~$ lxc exec kali -- bash
root@kali:~# exit
exit
luca@penguin:~$ sudo apt update && sudo apt upgrade
luca@penguin:~$ chmod 600 ~/.config/lxc/servercerts/chronos.crt 
```